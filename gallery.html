<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Gallery - 书涯</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <nav>
    <div class="nav-container">
      <a href="index.html" class="nav-brand">Home</a>
      <ul class="nav-links">
        <li><a href="about.html">About</a></li>
        <li><a href="projects.html">Projects</a></li>
        <li><a href="gallery.html">Gallery</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
    </div>
  </nav>

  <h1>Gallery</h1>
  <p>A collection of photos and moments from my journey.</p>

  <div class="gallery-grid">
    <div class="gallery-item">
      <img src="photos/malaysia/1.jpg" alt="Malaysia Trip" />
      <div class="gallery-caption">
        <h3>Malaysia Trip</h3>
      </div>
    </div>
  </div>

  <!-- Modal for enlarged images -->
  <div id="imageModal" class="modal">
    <span class="close">&times;</span>
    <div class="modal-nav prev" id="prevBtn">&#10094;</div>
    <div class="modal-nav next" id="nextBtn">&#10095;</div>
    <img class="modal-content" id="modalImage">
    <div class="modal-caption" id="modalCaption"></div>
    <div class="image-counter" id="imageCounter"></div>
  </div>

  <script>
    // Gallery modal functionality
    const modal = document.getElementById('imageModal');
    const modalImg = document.getElementById('modalImage');
    const modalCaption = document.getElementById('modalCaption');
    const imageCounter = document.getElementById('imageCounter');
    const galleryImages = document.querySelectorAll('.gallery-item img');
    const closeBtn = document.querySelector('.close');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    
    let currentImages = [];
    let currentIndex = 0;
    let currentTitle = '';

    function updateModal() {
      modalImg.src = currentImages[currentIndex];
      modalImg.alt = `${currentTitle} - Image ${currentIndex + 1}`;
      modalCaption.innerHTML = `<h3>${currentTitle}</h3>`;
      
      if (currentImages.length > 1) {
        imageCounter.textContent = `${currentIndex + 1} / ${currentImages.length}`;
        imageCounter.style.display = 'block';
        prevBtn.style.display = 'block';
        nextBtn.style.display = 'block';
      } else {
        imageCounter.style.display = 'none';
        prevBtn.style.display = 'none';
        nextBtn.style.display = 'none';
      }
    }

    // Open modal when clicking on gallery images
    galleryImages.forEach(img => {
      img.addEventListener('click', function() {
        const galleryItem = this.parentElement;
        currentTitle = galleryItem.querySelector('h3').textContent.replace(/\s*\(\d+\s*photos?\)/, '');
        
        // Multiple images - extract common path and use relative filenames
        const basePath = "photos/malaysia/";
        const imageFiles = [
          "1.jpg",
          "2.jpg", 
          "3.jpg",
          "4.jpg",
          "5.jpg",
          "6.jpg",
          "7.jpg",
          "8.jpg",
          "9.jpg",
          "10.jpg",
          "11.jpg",
          "12.jpg",
          "13.jpg",
          "14.jpg",
          "15.jpg",
          "16.jpg",
          "17.jpg"
        ];
        
        currentImages = imageFiles.map(file => basePath + file);
        
        currentIndex = 0;
        modal.style.display = 'block';
        updateModal();
      });
    });

    // Navigation functions
    function showPrevious() {
      currentIndex = (currentIndex - 1 + currentImages.length) % currentImages.length;
      updateModal();
    }

    function showNext() {
      currentIndex = (currentIndex + 1) % currentImages.length;
      updateModal();
    }

    // Event listeners
    prevBtn.addEventListener('click', showPrevious);
    nextBtn.addEventListener('click', showNext);

    // Close modal when clicking the X
    closeBtn.addEventListener('click', function() {
      modal.style.display = 'none';
    });

    // Close modal when clicking outside the image
    modal.addEventListener('click', function(e) {
      if (e.target === modal) {
        modal.style.display = 'none';
      }
    });

    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
      if (modal.style.display === 'block') {
        if (e.key === 'Escape') {
          modal.style.display = 'none';
        } else if (e.key === 'ArrowLeft') {
          showPrevious();
        } else if (e.key === 'ArrowRight') {
          showNext();
        }
      }
    });
  </script>
</body>
</html>